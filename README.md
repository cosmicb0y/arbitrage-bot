# Arbitrage Bot

ê³ ì„±ëŠ¥ ì•”í˜¸í™”í ì°¨ìµê±°ë˜ íƒì§€ ë° ì‹¤í–‰ ì‹œìŠ¤í…œ

## ê°œìš”

ë‹¤ì¤‘ ê±°ë˜ì†Œ ê°„ ê°€ê²© ì°¨ì´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ì°¨ìµê±°ë˜ ê¸°íšŒë¥¼ íƒì§€í•˜ëŠ” Rust ê¸°ë°˜ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

- **ì‹¤ì‹œê°„ ê°€ê²© í”¼ë“œ**: WebSocketì„ í†µí•œ 6ê°œ ê±°ë˜ì†Œ ì—°ê²° (Binance, Coinbase, Bybit, GateIO, Upbit, Bithumb)
- **ì°¨ìµê±°ë˜ íƒì§€**: ê±°ë˜ì†Œ ê°„ í”„ë¦¬ë¯¸ì—„ ê³„ì‚° ë° ê¸°íšŒ íƒì§€ (ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„ í¬í•¨)
- **ê°€ê²© ì •ê·œí™”**: USDT/USDC ë””í˜ê¹… ëŒ€ì‘, ë‹¤ì¤‘ í˜¸ê°€í†µí™” USD ë³€í™˜
- **ë°ìŠ¤í¬í†± GUI**: Tauri + React ê¸°ë°˜ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
- **í…”ë ˆê·¸ë¨ ì•Œë¦¼**: ì‹¤ì‹œê°„ ì°¨ìµê±°ë˜ ê¸°íšŒ ì•Œë¦¼
- **CLI ì„œë²„**: í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ ì§€ì›

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
arbitrage-bot/
â”œâ”€â”€ crates/
â”‚   â”œâ”€â”€ core/           # í•µì‹¬ ë°ì´í„° íƒ€ì… (Exchange, Chain, FixedPoint, QuoteCurrency ë“±)
â”‚   â”œâ”€â”€ feeds/          # WebSocket ê°€ê²© í”¼ë“œ ìˆ˜ì§‘ (6ê°œ ê±°ë˜ì†Œ ì–´ëŒ‘í„°)
â”‚   â”œâ”€â”€ engine/         # ì°¨ìµê±°ë˜ íƒì§€ ì—”ì§„ (í”„ë¦¬ë¯¸ì—„ ê³„ì‚°, ê¹Šì´ ë¶„ì„)
â”‚   â”œâ”€â”€ executor/       # ê±°ë˜ ì‹¤í–‰ (CEX/DEX) - ê°œë°œ ì¤‘
â”‚   â””â”€â”€ alerts/         # í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì‹œìŠ¤í…œ
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ server/         # CLI í—¤ë“œë¦¬ìŠ¤ ì„œë²„ (WebSocket í”¼ë“œ + REST API)
â”‚   â””â”€â”€ desktop/        # Tauri ë°ìŠ¤í¬í†± ì•±
â”‚       â”œâ”€â”€ src-tauri/  # Rust ë°±ì—”ë“œ
â”‚       â””â”€â”€ src/        # React + TypeScript í”„ë¡ íŠ¸ì—”ë“œ
â”œâ”€â”€ docs/               # ë¬¸ì„œ (ARCHITECTURE.md, DATA_MODEL.md)
â””â”€â”€ Cargo.toml          # ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì •
```

## ìš”êµ¬ ì‚¬í•­

- Rust 1.75+
- Node.js 18+
- pnpm

### macOS ì¶”ê°€ ìš”êµ¬ ì‚¬í•­ (Tauri)

```bash
xcode-select --install
```

## ë¹ ë¥¸ ì‹œì‘

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# Rust í¬ë ˆì´íŠ¸ ë¹Œë“œ
cargo build

# í”„ë¡ íŠ¸ì—”ë“œ ì˜ì¡´ì„± (ë°ìŠ¤í¬í†± ì•±ìš©)
cd apps/desktop
pnpm install
```

### 2. CLI ì„œë²„ ì‹¤í–‰

```bash
# ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ (ê¸°ë³¸)
cargo run -p arbitrage-server

# ë¼ì´ë¸Œ WebSocket í”¼ë“œ
cargo run -p arbitrage-server -- --live

# ì˜µì…˜
cargo run -p arbitrage-server -- --help
```

### 3. ë°ìŠ¤í¬í†± ì•± ì‹¤í–‰

```bash
cd apps/desktop
pnpm tauri dev
```

## CLI ì˜µì…˜

```
arbitrage-bot [OPTIONS]

Options:
  -c, --config <FILE>      ì„¤ì • íŒŒì¼ ê²½ë¡œ [default: config.json]
  -p, --min-premium <BPS>  ìµœì†Œ í”„ë¦¬ë¯¸ì—„ (basis points) [default: 30]
  -m, --mode <MODE>        ì‹¤í–‰ ëª¨ë“œ: auto, manual, alert [default: alert]
  -l, --log-level <LEVEL>  ë¡œê·¸ ë ˆë²¨: trace, debug, info, warn, error [default: info]
      --dry-run            ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ (ì‹¤ì œ ê±°ë˜ ì—†ìŒ) [default: true]
      --live               ë¼ì´ë¸Œ WebSocket í”¼ë“œ ì‚¬ìš©
```

## í•µì‹¬ ê°œë…

### Fixed-Point ê°€ê²©

ëª¨ë“  ê°€ê²©ì€ `FixedPoint(u64)`ë¡œ ì €ì¥ë©ë‹ˆë‹¤ (8ìë¦¬ ì†Œìˆ˜ì ).

```rust
let price = FixedPoint::from_f64(50000.0);  // 5000000000000
let value = price.to_f64();                  // 50000.0
```

### í”„ë¦¬ë¯¸ì—„ ê³„ì‚°

í”„ë¦¬ë¯¸ì—„ì€ basis points (bps)ë¡œ í‘œí˜„ë©ë‹ˆë‹¤. 100 bps = 1%.

```rust
// Binanceì—ì„œ $50,000, Coinbaseì—ì„œ $50,500ì´ë©´
// í”„ë¦¬ë¯¸ì—„ = (50500 - 50000) / 50000 * 10000 = 100 bps
```

### ì§€ì› ê±°ë˜ì†Œ

| ê±°ë˜ì†Œ | í˜¸ê°€ í†µí™” | ìƒíƒœ |
|--------|----------|------|
| Binance | USDT, USDC | âœ… Active |
| Coinbase | USD, USDT, USDC | âœ… Active |
| Bybit | USDT, USDC | âœ… Active |
| GateIO | USDT, USDC | âœ… Active |
| Upbit | KRW | âœ… Active |
| Bithumb | KRW | âœ… Active |
| Kraken | USD | ğŸš§ Planned |
| OKX | USDT | ğŸš§ Planned |

## í…ŒìŠ¤íŠ¸

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸
cargo test --workspace

# íŠ¹ì • í¬ë ˆì´íŠ¸ í…ŒìŠ¤íŠ¸
cargo test -p arbitrage-core
cargo test -p arbitrage-engine

# ìƒì„¸ ì¶œë ¥
cargo test --workspace -- --nocapture
```

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Desktop App (Tauri)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Dashboard  â”‚  â”‚Opportunitiesâ”‚  â”‚      Settings       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ IPC Commands
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Rust Backend                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Feeds   â”‚  â”‚  Engine  â”‚  â”‚ Executor â”‚  â”‚   Core   â”‚     â”‚
â”‚  â”‚(WebSocket)â”‚  â”‚(Detector)â”‚  â”‚(CEX/DEX) â”‚  â”‚ (Types)  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                         â”‚
         â”‚ WebSocket                               â”‚ REST/Blockchain
         â–¼                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Exchanges    â”‚                    â”‚    Execution        â”‚
â”‚ Binance,Coinbaseâ”‚                    â”‚  (Future)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## í¬ë ˆì´íŠ¸ ìƒì„¸

### arbitrage-core

í•µì‹¬ ë°ì´í„° íƒ€ì… ì •ì˜:
- `Exchange`, `Chain`, `ExchangeType`
- `FixedPoint` (ê³ ì •ì†Œìˆ˜ì  ê°€ê²©)
- `PriceTick`, `ArbitrageOpportunity`
- `Asset`, `TradingPair`

### arbitrage-feeds

ê±°ë˜ì†Œ WebSocket ì—°ê²°:
- `WsClient`: WebSocket í´ë¼ì´ì–¸íŠ¸ (ìë™ ì¬ì—°ê²°)
- `BinanceAdapter`, `CoinbaseAdapter`, `BybitAdapter`, `GateIOAdapter`, `UpbitAdapter`, `BithumbAdapter`: ê±°ë˜ì†Œë³„ ë©”ì‹œì§€ íŒŒì„œ
- `KoreanExchangeAdapter`: í•œêµ­ ê±°ë˜ì†Œ ê³µí†µ íŠ¸ë ˆì´íŠ¸ (USDT/USDC ë§ˆì¼“ ê°ì§€)
- `FeedConfig`: ì—°ê²° ì„¤ì •
- `SymbolMapping`: ê±°ë˜ì†Œ ê°„ ì‹¬ë³¼ ì •ê·œí™”

### arbitrage-engine

ì°¨ìµê±°ë˜ íƒì§€ ë¡œì§:
- `OpportunityDetector`: ê¸°íšŒ íƒì§€ê¸° (DashMap ê¸°ë°˜ lock-free)
- `PremiumMatrix`: ê±°ë˜ì†Œ ê°„ í”„ë¦¬ë¯¸ì—„ ê³„ì‚°
- `DepthAnalyzer`: í˜¸ê°€ì°½ ê¹Šì´ ë¶„ì„
- `FeeCalculator`: ê±°ë˜ ìˆ˜ìˆ˜ë£Œ ê³„ì‚°
- `RouteFinder`: ìµœì  ê²½ë¡œ íƒìƒ‰

### arbitrage-executor

ê±°ë˜ ì‹¤í–‰ (ê°œë°œ ì¤‘):
- `CexExecutor`: ì¤‘ì•™í™” ê±°ë˜ì†Œ ì£¼ë¬¸
- `DexExecutor`: DEX ìŠ¤ì™‘ ì‹¤í–‰
- `Order`, `OrderStatus`: ì£¼ë¬¸ ê´€ë¦¬

### arbitrage-alerts

í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì‹œìŠ¤í…œ:
- `TelegramBot`: ë´‡ ëª…ë ¹ì–´ í•¸ë“¤ëŸ¬
- `Notifier`: ì•Œë¦¼ ë°œì†¡ ë° ì¤‘ë³µ ì œê±°
- `Database`: SQLite ê¸°ë°˜ ì„¤ì • ì €ì¥
- `AlertConfig`: ì‚¬ìš©ìë³„ ì•Œë¦¼ ì„¤ì •

## ê°œë°œ ê°€ì´ë“œ

### ìƒˆ ê±°ë˜ì†Œ ì¶”ê°€

1. `crates/core/src/exchange.rs`ì— ê±°ë˜ì†Œ enum ì¶”ê°€
2. `crates/feeds/src/adapter/`ì— ìƒˆ ì–´ëŒ‘í„° íŒŒì¼ ìƒì„±
3. `crates/feeds/src/adapter/mod.rs`ì—ì„œ export
4. `apps/server/src/main.rs`ì— WebSocket í”¼ë“œ í•¸ë“¤ëŸ¬ ì¶”ê°€

### ì½”ë“œ ìŠ¤íƒ€ì¼

```bash
# í¬ë§·íŒ…
cargo fmt

# ë¦°íŠ¸
cargo clippy --workspace
```

## ë¼ì´ì„ ìŠ¤

MIT
